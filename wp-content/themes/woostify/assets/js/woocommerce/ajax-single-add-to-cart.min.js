"use strict";function woostifyAjaxSingleHandleError(e){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),e.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open")}function woostifyAjaxSingleUpdateFragments(e){if(woostify_woocommerce_general.shipping_threshold.enabled_shipping_threshold&&woostify_woocommerce_general.shipping_threshold.enabled_shipping_threshold_effect){var t=document.querySelectorAll(".free-shipping-progress-bar"),n=0;t.length&&(n=parseInt(t[0].getAttribute("data-progress")))}fetch(wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),{method:"POST"}).then((function(e){return e.json()})).then((function(e){void 0!==e.fragments&&Object.entries(e.fragments).forEach((function([e,t]){let n=document.querySelectorAll(e);n.length&&n.forEach((function(e){e.insertAdjacentHTML("afterend",t),e.remove()}))}))})).finally((function(){woostifyAjaxSingleHandleError(e),jQuery(document.body).trigger("added_to_cart"),progressBarConfetti(t,n)}))}function woostifyAjaxSingleAddToCartButton(){var e=document.querySelectorAll(".single_add_to_cart_button");e.length&&e.forEach((function(e){e.onclick=function(t){var n=e.closest("form.cart");if(!n||"POST"!==n.method.toUpperCase()||e.classList.contains("disabled"))return;t.preventDefault();let o=n.querySelector("input.qty");null==o&&(o=n.querySelector('input[name="quantity"]'));let r=!!o&&Number(o.value.trim());if(!r||isNaN(r)||r<=0)alert(woostify_woocommerce_general.qty_warning);else{var a=new FormData(n);a.append("add-to-cart",n.querySelector("[name=add-to-cart]").value),a.append("ajax_nonce",woostify_woocommerce_general.ajax_nonce),e.classList.add("loading"),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof closeAll&&closeAll(),jQuery(document.body).on("added_to_cart",(function(){"function"==typeof cartSidebarOpen&&cartSidebarOpen()})),document.documentElement.classList.add("mini-cart-updating"),fetch(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","woostify_single_add_to_cart"),{method:"POST",body:a}).then((function(e){if(e){var t=e.json();if(t.error&&t.product_url)window.location=t.product_url;else{if("yes"!==wc_add_to_cart_params.cart_redirect_after_add)return t;window.location=wc_add_to_cart_params.cart_url}}})).then((function(t){document.documentElement.classList.remove("mini-cart-updating"),woostifyAjaxSingleUpdateFragments(e),e.getAttribute("data-checkout_url")&&(window.location=e.getAttribute("data-checkout_url"))})).catch((function(){document.documentElement.classList.remove("mini-cart-updating"),woostifyAjaxSingleHandleError(e)}))}}}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));